{"version":3,"sources":["src/game.js"],"names":["window","FTW","game","$","click","modal","trigger","socket","emit","time","val","problems","password","type","currMode","id","currChoice","pw","addClass","removeClass","prop","hide","keypress","e","which","spectating","leaveGame","show","stop","css","text","joinGame","setHost","setTimer","params","animate","width","setProblem","problem","console","log","html","focus","setScores","scores","sort","a","b","score","empty","i","length","disp","username","dispColor","answer","correct","append","loadGames","dataObj","uuid","Object","keys","data","host","box","document","createElement","header","started","body","users","timePerProblem","footer","appendChild","private","changeReviewProblem","setReviewData","reviewProblemData","reviewProblemIndex","delta","arrLen","currProblem"],"mappings":"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","file":"game.js","sourcesContent":["/* eslint-env browser, jquery */\r\n(() => {\r\n  if (window.FTW && !window.FTW.game) {\r\n    const game = {};\r\n\r\n    // This is the button that appears on the nav\r\n    $('#create-game-button').click(() => {\r\n      $('#create-game-modal').modal('toggle');\r\n\r\n      $('#create-ftw').trigger('click');\r\n    });\r\n\r\n    // This is the button that appears in the modal box.\r\n    $('#create-game').click(() => {\r\n      window.FTW.socket.emit(\r\n        'create game',\r\n\r\n        {\r\n          time: $('#create-time').val(),\r\n          problems: $('#create-problem-count').val(),\r\n          password: $('#game-password').val(),\r\n          type: window.FTW.game.currMode,\r\n        },\r\n      );\r\n\r\n      $('#game-password').val('');\r\n      $('#create-game-modal').modal('toggle');\r\n    });\r\n\r\n    $('#join-game').click(() => {\r\n      window.FTW.socket.emit(\r\n        'join game',\r\n\r\n        {\r\n          id: game.currChoice,\r\n          pw: $('#game-join-password').val(),\r\n        },\r\n      );\r\n\r\n      $('#game-join-modal').modal('toggle');\r\n      $('#game-join-password').val('');\r\n    });\r\n\r\n    $('#create-ftw').click(() => {\r\n      $('#create-ftw').addClass('active');\r\n      $('#create-countdown').removeClass('active');\r\n\r\n\r\n      $('#create-time').prop('disabled', false);\r\n      $('#create-problem-count').prop('disabled', false);\r\n\r\n      window.FTW.game.currMode = 'FTW';\r\n    });\r\n\r\n    $('#create-countdown').click(() => {\r\n      $('#create-countdown').addClass('active');\r\n      $('#create-ftw').removeClass('active');\r\n\r\n      $('#create-time').prop('disabled', true);\r\n      $('#create-problem-count').prop('disabled', true);\r\n\r\n      window.FTW.game.currMode = 'CD';\r\n    });\r\n\r\n    $('#leave-game-button').click(() => window.FTW.socket.emit('leave game'));\r\n\r\n    $('#start-game-button').click(() => {\r\n      window.FTW.socket.emit('start game');\r\n      $('#start-game-button').hide();\r\n    });\r\n\r\n    $('#answer-box').keypress((e) => {\r\n      if (e.which === 13) {\r\n        window.FTW.socket.emit('answer', $('#answer-box').val());\r\n        $('#answer-box').val('');\r\n        $('#answer-box').hide();\r\n      }\r\n    });\r\n\r\n    game.spectating = false;\r\n\r\n    game.leaveGame = () => {\r\n      $('#problem-box').hide();\r\n      $('#start-game-button').hide();\r\n      $('#leave-game-button').hide();\r\n      $('#table-scores').hide();\r\n\r\n      $('#game-display').show();\r\n      $('#create-game-button').show();\r\n      $('#table-ratings').show();\r\n\r\n      $('#timer').stop(true, true);\r\n      $('#timer').css('width', '');\r\n\r\n      $('#problem-header').text('Waiting to start...');\r\n      $('#problem-text').text('');\r\n    };\r\n\r\n    game.joinGame = () => {\r\n      $('#problem-box').show();\r\n      $('#leave-game-button').show();\r\n      $('#table-scores').show();\r\n\r\n      $('#game-display').hide();\r\n      $('#create-game-button').hide();\r\n      $('#review-game-button').hide();\r\n      $('#table-ratings').hide();\r\n\r\n      $('#answer-box').hide();\r\n\r\n      // Different message for spectators\r\n      if (game.spectating) {\r\n        $('#problem-header').text('Waiting for next problem...');\r\n      }\r\n    };\r\n\r\n    game.setHost = () => {\r\n      $('#start-game-button').show();\r\n    };\r\n\r\n    game.setTimer = (params) => {\r\n      $('#problem-header').text(params.type);\r\n      $('#timer').stop(true, true);\r\n      $('#timer').css('width', '');\r\n      $('#timer').animate({ width: '100%' }, params.time * 1000);\r\n\r\n      $('#answer-box').hide();\r\n    };\r\n\r\n    game.setProblem = (problem) => {\r\n      console.log('==== Problem Data ====');\r\n      console.log(problem);\r\n\r\n      $('#problem-text').html(problem.text);\r\n\r\n      $('#start-game-button').hide();\r\n\r\n      if (!game.spectating) {\r\n        $('#answer-box').show();\r\n      }\r\n\r\n      $('#answer-box').val('');\r\n      $('#answer-box').focus();\r\n    };\r\n\r\n    game.setScores = (scores) => {\r\n      scores.sort((a, b) => b.score - a.score);\r\n      $('#userScores').empty();\r\n\r\n      for (let i = 0; i < scores.length; i += 1) {\r\n        let disp = scores[i].username;\r\n        let dispColor = '';\r\n\r\n        if (scores[i].answer) {\r\n          disp += `: ${scores[i].answer.text}`;\r\n          dispColor = scores[i].answer.correct ? 'table-success' : 'table-danger';\r\n        }\r\n\r\n        $('#userScores').append(`<tr class='${dispColor}'><td>${disp}</td><td class='text-right'>${scores[i].score}</td></tr>`);\r\n      }\r\n    };\r\n\r\n    game.loadGames = (dataObj) => {\r\n      $('#game-display').empty();\r\n\r\n      // Regenerate all games. This sacrifices efficiency for simplicity.\r\n      for (let i = 0; i < Object.keys(dataObj).length; i += 1) {\r\n        const uuid = Object.keys(dataObj)[i];\r\n        const data = dataObj[uuid];\r\n\r\n        if (data.host !== null) {\r\n          const box = document.createElement('div');\r\n          $(box).addClass('game-box');\r\n\r\n          const header = document.createElement('div');\r\n          $(header).addClass('game-disp-header');\r\n          if (data.started) {\r\n            $(header).text('Game Started');\r\n          } else {\r\n            $(header).text(data.type);\r\n          }\r\n\r\n          const body = document.createElement('div');\r\n          $(body).addClass('game-disp-body');\r\n          $(body).append(`<p>Players: ${data.users.length}</p>`);\r\n          $(body).append(`<p>${data.timePerProblem} sec</p>`);\r\n\r\n          if (data.type !== 'CD') {\r\n            $(body).append(`<p>Problems: ${data.problems}</p>`);\r\n          } else {\r\n            $(body).append('<p>CD Scoring</p>');\r\n          }\r\n\r\n          const footer = document.createElement('div');\r\n          $(footer).addClass('game-disp-header');\r\n          $(footer).text(data.host.username);\r\n\r\n\r\n          box.appendChild(header);\r\n          box.appendChild(body);\r\n          box.appendChild(footer);\r\n\r\n          if (data.started) {\r\n            $(body).addClass('game-started');\r\n          }\r\n          \r\n          $(box).click(() => {\r\n            if (data.private) {\r\n              $('#game-join-modal').modal('toggle');\r\n              game.currChoice = uuid;\r\n            } else {\r\n              window.FTW.socket.emit(\r\n                'join game',\r\n\r\n                {\r\n                  id: uuid,\r\n                  pw: '',\r\n                },\r\n              );\r\n            }\r\n          });\r\n\r\n          $('#game-display').append(box);\r\n        }\r\n      }\r\n    };\r\n\r\n    $('#review-game-button').click(() => {\r\n      $('#review-game-modal').modal('toggle');\r\n      game.changeReviewProblem(0);\r\n    });\r\n\r\n    game.setReviewData = (data) => {\r\n      $('#review-game-button').show();\r\n\r\n      game.reviewProblemData = data;\r\n      game.reviewProblemIndex = 0;\r\n    };\r\n\r\n    game.changeReviewProblem = (delta) => {\r\n      if (game.reviewProblemData) {\r\n        const arrLen = game.reviewProblemData.length;\r\n        game.reviewProblemIndex += delta;\r\n        game.reviewProblemIndex = ((game.reviewProblemIndex % arrLen) + arrLen) % arrLen;\r\n        // Display problem\r\n        const currProblem = game.reviewProblemData[game.reviewProblemIndex];\r\n        $('#review-game-text').html(currProblem.text);\r\n        $('#review-game-answer').html(`<strong>Answer: ${currProblem.answer}</strong>`);\r\n      }\r\n    };\r\n\r\n    $('#review-game-button').click(() => $('#review-game-modal').show());\r\n\r\n    $('#review-game-left-button').click(() => game.changeReviewProblem(-1));\r\n\r\n    $('#review-game-right-button').click(() => game.changeReviewProblem(1));\r\n\r\n    window.FTW.game = game;\r\n  }\r\n})();\r\n"]}